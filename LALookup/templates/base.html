<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="description" content="LA Lookup">
        <meta name="keywords" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> {{ title }}</title>
    </head>


    <body>
        {% load static %}
        {# Load the tag library #}
        {% load bootstrap5 %}

        {# Load CSS and JavaScript #}
        {% bootstrap_css %}
        {% bootstrap_javascript %}

        {# Display django.contrib.messages as Bootstrap alerts #}
        {% bootstrap_messages %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>


        <script>
            var lat = 0.0;
            var long = 0.0;

            function submitLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(setLatLong);
                } else {
                    alert("Geolocation is not supported by this browser");
                }
            }

            function setLatLong(position) {
                lat = position.coords.latitude;
                long = position.coords.longitude;
                clickSubmit();
            }

            function setAddress(){
                alert("I need to set address: " + addressText.value);
                address = "70116";

            }

            function success(data) {
                    alert("Success func");
            }

            function clickSubmit(form) {
                formData = {
                    lat: lat,
                    lon: long,
                    address: addressText.value,
                }


                $.post( "/search", formData)
                    .done(function( data ) {
                        console.log(data);
                        alert(JSON.stringify(data));
                    });

            }


        </script>

        {%block content %}

        {% endblock content %}


        <div class="b-example-divider"></div>
        <br><br><br><br><br>

        <div class="container">
          <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
            <div class="col-md-4 d-flex align-items-center">
              <a href="/" class="mb-3 me-2 mb-md-0 text-body-secondary text-decoration-none lh-1">
                <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"/></svg>
              </a>
                <span class="mb-3 mb-md-0 text-body-secondary">&copy;2004 <a href="mailto:mjw@insomniac.tech">Matthew Wollenweber </a></span>
            </div>

            <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
              <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#twitter"/></svg></a></li>
              <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#instagram"/></svg></a></li>
              <li class="ms-3"><a class="text-body-secondary" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"/></svg></a></li>
            </ul>
          </footer>
        </div>

    </body>

</html>